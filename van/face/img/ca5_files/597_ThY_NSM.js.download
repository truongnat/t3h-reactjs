if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g){a=function(a,b){switch(a){default:return""}};e.exports=a}),null);
__d("LSLocalizedStringsV2",["fbt","bs_caml_int64"],(function(a,b,c,d,e,f,g){a=function(a,c){switch(a){case"2285622730":return g._(/*FBT_CALL*/"Messenger \u0111ang offline"/*FBT_CALL*/);case"1919524925":return g._(/*FBT_CALL*/"Vui l\u00f2ng ki\u1ec3m tra k\u1ebft n\u1ed1i c\u1ee7a b\u1ea1n. M\u1ecdi vi\u1ec7c b\u1ea1n l\u00e0m trong \u0111o\u1ea1n chat khi offline, ch\u1eb3ng h\u1ea1n nh\u01b0 g\u1eedi tin nh\u1eafn ho\u1eb7c \u0111\u1ed5i m\u00e0u \u0111o\u1ea1n chat, s\u1ebd ho\u00e0n t\u1ea5t khi b\u1ea1n k\u1ebft n\u1ed1i Internet."/*FBT_CALL*/);case"14617150":return g._(/*FBT_CALL*/"Ng\u01b0\u1eddi d\u00f9ng Facebook"/*FBT_CALL*/);case"2421884758":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 nh\u1eafc l\u1ea1i tin nh\u1eafn c\u1ee7a m\u00ecnh"/*FBT_CALL*/);case"2676961947":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 nh\u1eafc l\u1ea1i tin nh\u1eafn c\u1ee7a {participant_name}"/*FBT_CALL*/,[g._param("participant_name",c(0))]);case"3298086032":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 nh\u1eafc l\u1ea1i tin nh\u1eafn c\u1ee7a b\u1ea1n"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"3873263038":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 nh\u1eafc l\u1ea1i tin nh\u1eafn c\u1ee7a h\u1ecd"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"2616853333":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 nh\u1eafc l\u1ea1i tin nh\u1eafn c\u1ee7a {reply_source_sender_name}"/*FBT_CALL*/,[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"4002265907":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 tr\u1ea3 l\u1eddi ch\u00ednh m\u00ecnh"/*FBT_CALL*/);case"2663996736":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 tr\u1ea3 l\u1eddi {participant_name}"/*FBT_CALL*/,[g._param("participant_name",c(0))]);case"2868699317":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 tr\u1ea3 l\u1eddi b\u1ea1n"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"2688620547":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 tr\u1ea3 l\u1eddi ch\u00ednh h\u1ecd"/*FBT_CALL*/,[g._param("sender_name",c(0))]);case"3544071775":return g._(/*FBT_CALL*/"{sender_name} \u0111\u00e3 tr\u1ea3 l\u1eddi {reply_source_sender_name}"/*FBT_CALL*/,[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"2375715979":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 thu h\u1ed3i m\u1ed9t tin nh\u1eafn."/*FBT_CALL*/);case"3810165735":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 thu h\u1ed3i m\u1ed9t tin nh\u1eafn."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"1890485478":return g._(/*FBT_CALL*/"B\u1ea1n"/*FBT_CALL*/);case"1299547062":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n."/*FBT_CALL*/);case"3621454483":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3948960063":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t file \u0111\u00ednh k\u00e8m."/*FBT_CALL*/);case"1249692047":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t file \u0111\u00ednh k\u00e8m."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2106510577":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh."/*FBT_CALL*/);case"3960370133":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3798396796":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t file GIF t\u1eeb {app_name}."/*FBT_CALL*/,[g._param("app_name",c(0))]);case"3388601579":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t file GIF t\u1eeb {app_name}."/*FBT_CALL*/,[g._param("user_name",c(0)),g._param("app_name",c(1))]);case"1556712457":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t file GIF."/*FBT_CALL*/);case"3601791933":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t file GIF."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3759817031":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t video."/*FBT_CALL*/);case"2934729541":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t video."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"392493418":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t tin nh\u1eafn tho\u1ea1i."/*FBT_CALL*/);case"4085467454":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t tin nh\u1eafn tho\u1ea1i."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2738683656":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n selfie."/*FBT_CALL*/);case"2996525642":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n selfie."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2326868239":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 chia s\u1ebb m\u1ed9t b\u00e0i vi\u1ebft."/*FBT_CALL*/);case"1001986796":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 chia s\u1ebb m\u1ed9t b\u00e0i vi\u1ebft."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2285746939":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 tr\u1ea3 l\u1eddi m\u1ed9t tin."/*FBT_CALL*/);case"3759448420":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 tr\u1ea3 l\u1eddi m\u1ed9t tin."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3719716921":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t tin."/*FBT_CALL*/);case"284944921":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t tin."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3557790945":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t th\u01b0\u1edbc phim."/*FBT_CALL*/);case"3756846086":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t th\u01b0\u1edbc phim."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"780378803":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t video IGTV."/*FBT_CALL*/);case"3918212613":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t video IGTV."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"3161890215":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 chia s\u1ebb m\u1ed9t c\u1eeda h\u00e0ng."/*FBT_CALL*/);case"863428456":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 chia s\u1ebb m\u1ed9t c\u1eeda h\u00e0ng."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2716405471":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t trang."/*FBT_CALL*/);case"3909474073":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t trang."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"2135145355":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t v\u1ecb tr\u00ed tr\u1ef1c ti\u1ebfp."/*FBT_CALL*/);case"3603511704":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t v\u1ecb tr\u00ed tr\u1ef1c ti\u1ebfp."/*FBT_CALL*/,[g._param("user_name",c(0))]);case"705614308":return g._(/*FBT_CALL*/{"*":"B\u1ea1n \u0111\u00e3 g\u1eedi {number} \u1ea3nh.","_1":"B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh."}/*FBT_CALL*/,[g._plural(b("bs_caml_int64").to_float(c(0)),"number")]);case"313217698":return g._(/*FBT_CALL*/{"*":"{user_name} \u0111\u00e3 g\u1eedi {number} \u1ea3nh.","_1":"{user_name} \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh."}/*FBT_CALL*/,[g._plural(b("bs_caml_int64").to_float(c(1)),"number"),g._param("user_name",c(0))]);case"3558654267":return g._(/*FBT_CALL*/"B\u1ea1n \u0111\u00e3 g\u1eedi nhi\u1ec1u file \u0111\u00ednh k\u00e8m."/*FBT_CALL*/);case"3422266740":return g._(/*FBT_CALL*/"{user_name} \u0111\u00e3 g\u1eedi nhi\u1ec1u file \u0111\u00ednh k\u00e8m."/*FBT_CALL*/,[g._param("user_name",c(0))]);default:return""}};e.exports=a}),null);
__d("LSTableDefaults",[],(function(a,b,c,d,e,f){e.exports={sync_groups:{syncStatus:[0,0],sendSyncParams:!1,minTimeToSyncTimestampMs:[0,0],canIgnoreTimestamp:!1,priority:[0,0],lastSyncRequestTimestampMs:[0,0],lastSyncCompletedTimestampMs:[0,0],syncChannel:[0,1]},pending_tasks:{enqueueTimestampMs:[0,0],firstExecutedTimestampMs:[0,0],failureCount:[0,0],minTimeToSyncTimestampMs:[0,0],pluginType:[0,0],priority:[0,0]},pending_fire_and_forget_tasks:{enqueueTimestampMs:[0,0],priority:[0,0]},contacts:{isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:[0,0],rank:[0,0],contactType:[0,0],contactTypeExact:[0,0],canViewerMessage:!0,gender:[0,0],authorityLevel:[0,0],optimisticBlockedByViewerStatus:[0,0],optimisticBlockedByViewerStatusTimestampMs:[0,0],contactReachabilityStatusType:[0,0],restrictionType:[0,0],waConnectStatus:[0,0],capabilities2:[0,0]},ig_contact_info:{e2eeEligibility:[0,0]},reactions:{timestampMs:[0,0],authorityLevel:[0,0]},threads:{lastActivityTimestampMs:[0,0],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[0,0],muteExpireTimeMs:[0,0],isAdminSnippet:!1,ongoingCallState:[0,0],snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:[0,0],isCustomThreadPicture:!1,isDisappearingMode:!1,unreadDisappearingMessageCount:[0,0],authorityLevel:[0,0],capabilities2:[0,0],muteCallsExpireTimeMs:[0,0],unsendLimitMs:[0,0],threadInvitesEnabled:[0,0],threadInvitesEnabledV2:[0,0],capabilities3:[0,0]},threads_ranges_v2__generated:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],maxThreadKey:[0,0],maxLastActivityTimestampMs:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},messages:{timestampMs:[0,0],primarySortKey:[0,0],secondarySortKey:[0,0],isAdminMessage:!1,sendStatus:[0,0],sendStatusV2:[0,0],isUnsent:!1,replyStatus:[0,0],replyAttachmentType:[0,0],hasQuickReplies:!1,textHasLinks:!1,viewFlags:[0,0],displayedContentTypes:[0,1],quickReplyType:[0,0],authorityLevel:[0,0],unsentTimestampMs:[0,0]},messages_ranges_v2__generated:{isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},participants:{readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,0],readActionTimestampMs:[0,0],groupParticipantJoinState:[0,0]},attachments:{timestampMs:[0,0],attachmentType:[0,0],hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:[0,0],authorityLevel:[0,0]},attachments_ranges_v2__generated:{mediaGroup:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},attachment_items:{attachmentIndex:[0,0]},group_membership_approval_requests:{authorityLevel:[0,0]},admin_message_ctas:{timestampMs:[0,0],showAdChoiceIcon:!1},thread_nullstate:{ctaType:[0,0]},messages_status:{timestampMs:[0,0]},polls:{pollType:[0,0]},poll_options_v2:{voteCount:[0,0],sortKeyVotingTimestamp:[0,0],sortKeyCreationTimestamp:[0,0]},filtered_threads_ranges_v2__generated:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],maxThreadKey:[0,0],maxLastActivityTimestampMs:[0,0],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:"inbox"},community_folders:{capabilities:[0,0],notificationMutedUntil:[0,0]},community_members:{source:[0,0],adminActions:[0,0]},inbox_threads_ranges:{minThreadKey:[0,0],minLastActivityTimestampMs:[0,0],isLoadingBefore:!1,hasMoreBefore:!1},community_direct_invites_presets:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:[0,0],pictureUrlExpirationTimestampMs2:[0,0]},universal_search_recent_searches:{lastAccessedTimestampMs:[0,0]},contact_upload_settings:{authorityLevel:[0,0]},presence_settings:{isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1,hasConvertedToViewSideSettings:!1},video_chat_links_joining:{canAnonymousUsersJoin:[0,0]},notification_settings:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},transaction_history:{timestampMs:[0,0]},thread_themes:{isDeprecated:!1},ranking_scores:{score:[0,0],scoreIndex:[0,0]},story_buckets:{pageNum:[0,0],readState:[0,0]},stories:{authorityLevel:[0,0]},story_viewers:{interactionType:[0,1],authorityLevel:[0,0]},story_reactions:{authorityLevel:[0,0]},story_ad_unit:{shouldShowAdChoice:!1},story_overlays:{authorityLevel:[0,0]},media_staging:{progress:[0,0]},data_trace_meta:{initTimestampMs:[0,0],foregroundTimestampMs:[0,0],traceType:[0,0],shouldFlush:!1},data_trace_addon:{timestampMs:[0,0]},secure_encrypted_backups_client_state:{authorityLevel:[0,0],encryptionVersion:[0,0],revisionVersion:[0,0]},secure_encrypted_backups_epochs:{authorityLevel:[0,0]},encrypted_backups:{authorityLevel:[0,0]},secure_encrypted_backups_generated_recovery_code:{virtualDeviceType:[0,1]},encrypted_backups_virtual_devices:{virtualDeviceType:[0,1]},encrypted_backups_metadata:{authorityLevel:[0,0]},cutover_threads:{isMigrated:!1,showOpenMessageHistory:!1}}}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0}],[{name:"contacts",id:7,primary_key:["id"]},{name:"ig_contact_info",id:176,primary_key:["contactId"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v2__generated",id:159,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId","source"],communitySource:["communityId","source","name","contactId"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:["threadKey","pinnedTimestampMs","messageId"]}}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"]},{name:"community_events",id:202,primary_key:["eventId","communityId"]}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"]},{name:"data_trace_addon",id:154,primary_key:["addonId"],auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]}],[{name:"presence_states",id:186,primary_key:["contactId"]}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}]]}),null);
__d("I64",["bs_caml","bs_caml_format","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])?a:void 0}function b(a){return a}g.mk=c("bs_caml_int64").mk;g.succ=c("bs_caml_int64").succ;g.min_int=c("bs_caml_int64").min_int;g.max_int=c("bs_caml_int64").max_int;g.one=c("bs_caml_int64").one;g.zero=c("bs_caml_int64").zero;g.neg_one=c("bs_caml_int64").neg_one;g.of_int32=c("bs_caml_int64").of_int32;g.to_int32=c("bs_caml_int64").to_int32;g.add=c("bs_caml_int64").add;g.neg=c("bs_caml_int64").neg;g.sub=c("bs_caml_int64").sub;g.lsl_=c("bs_caml_int64").lsl_;g.lsr_=c("bs_caml_int64").lsr_;g.asr_=c("bs_caml_int64").asr_;g.is_zero=c("bs_caml_int64").is_zero;g.mul=c("bs_caml_int64").mul;g.xor=c("bs_caml_int64").xor;g.or_=c("bs_caml_int64").or_;g.and_=c("bs_caml_int64").and_;g.equal_null=c("bs_caml_int64").equal_null;g.equal_undefined=c("bs_caml_int64").equal_undefined;g.equal_nullable=c("bs_caml_int64").equal_nullable;g.to_float=c("bs_caml_int64").to_float;g.of_float=c("bs_caml_int64").of_float;g.div=c("bs_caml_int64").div;g.mod_=c("bs_caml_int64").mod_;g.compare=c("bs_caml_int64").compare;g.float_of_bits=c("bs_caml_int64").float_of_bits;g.bits_of_float=c("bs_caml_int64").bits_of_float;g.div_mod=c("bs_caml_int64").div_mod;g.to_hex=c("bs_caml_int64").to_hex;g.discard_sign=c("bs_caml_int64").discard_sign;g.to_string=c("bs_caml_int64").to_string;g.minus_one=c("bs_int64").minus_one;g.pred=c("bs_int64").pred;g.abs=c("bs_int64").abs;g.lognot=c("bs_int64").lognot;g.of_string_opt=c("bs_int64").of_string_opt;g.equal=c("bs_int64").equal;g.of_string=c("bs_caml_format").caml_int64_of_string;g.i64_gt=c("bs_caml").i64_gt;g.cast=a;g.asI64=b}),98);
__d("LSStorage",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){a=a.tableNames[b];b=a.indexes;a=a.primaryKeyIds;a=e==null?a:b[e];return a.reduceRight(function(a,b){if(d[b]!==void 0||e!=null)return{hd:d[b],tl:a};throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")},0)}function b(a,b){while(a!==0&&b!==0){if(a.hd!==b.hd&&!(Array.isArray(a.hd)&&Array.isArray(b.hd)&&a.hd.length===b.hd.length&&a.hd.every(function(a,c){return a===b.hd[c]})))return!1;a=a.tl;b=b.tl}return a===0&&b===0}g.searchKey=a;g.areKeysEqual=b}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(var d=e,b=Array.isArray(d),a=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(b){if(a>=d.length)break;g=d[a++]}else{a=d.next();if(a.done)break;g=a.value}g=g;if(typeof g!=="string")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreUtils",["LSTableDefaults","nativePromiseRegeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,d;return c("nativePromiseRegeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:b=[];e.next=3;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 3:d=e.sent;case 4:if(d.done){e.next=11;break}b.push(d.value);e.next=8;return c("nativePromiseRegeneratorRuntime").awrap(a.next());case 8:d=e.sent;e.next=4;break;case 11:return e.abrupt("return",b);case 12:case"end":return e.stop()}},null,this)}function b(a,b){var d=c("LSTableDefaults")[b];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers["extends"]({},a))}g.collectIterator=a;g.appendDefaultValues=b}),98);
__d("ReStoreDefaultValueMigration",["LSTableDefaults","QuickPerformanceLogger","ReStoreDefaultValuesMetadata","ReStoreUtils","nativePromiseRegeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return c("nativePromiseRegeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:f={};x.next=3;return c("nativePromiseRegeneratorRuntime").awrap(d("ReStoreUtils").collectIterator(e.entries(b,a,d("ReStoreDefaultValuesMetadata").defaultValuesTableName,void 0,"asc",void 0)));case 3:g=x.sent,(h=g,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!i){x.next=11;break}if(!(j>=h.length)){x.next=8;break}return x.abrupt("break",41);case 8:k=h[j++];x.next=15;break;case 11:j=h.next();if(!j.done){x.next=14;break}return x.abrupt("break",41);case 14:k=j.value;case 15:l=k;m=l[0];n=l[1];if(!(m!=null)){x.next=39;break}p=d("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(n);if(!(p==null)){x.next=22;break}return x.abrupt("continue",39);case 22:(q=p.columns,r=p.tableName),f[r]=(o=f[r])!=null?o:new Set(),(s=q,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 25:if(!t){x.next=31;break}if(!(u>=s.length)){x.next=28;break}return x.abrupt("break",39);case 28:v=s[u++];x.next=35;break;case 31:u=s.next();if(!u.done){x.next=34;break}return x.abrupt("break",39);case 34:v=u.value;case 35:w=v,f[r].add(w);case 37:x.next=25;break;case 39:x.next=5;break;case 41:return x.abrupt("return",f);case 42:case"end":return x.stop()}},null,this)}function i(a,b,d,e){var f,g,i,j,k,l,m,n;return c("nativePromiseRegeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c("nativePromiseRegeneratorRuntime").awrap(h(a,b,d));case 2:f=o.sent;g={};for(i in e.tableNames){j=c("LSTableDefaults")[i];if(j!=null)for(k in j)m=(l=f[i])==null?void 0:l.has(k),m||(g[i]=(n=g[i])!=null?n:{},g[i][k]=j[k])}return o.abrupt("return",g);case 6:case"end":return o.stop()}},null,this)}function j(a,b,e,f){var g,h,i;return c("nativePromiseRegeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.t0=c("nativePromiseRegeneratorRuntime").keys(f);case 1:if((j.t1=j.t0()).done){j.next=9;break}g=j.t1.value;h=Object.keys(c("LSTableDefaults")[g]||{});i={columns:h,tableName:g};j.next=7;return c("nativePromiseRegeneratorRuntime").awrap(e.put(b,a,d("ReStoreDefaultValuesMetadata").defaultValuesTableName,d("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(i)));case 7:j.next=1;break;case 9:case"end":return j.stop()}},null,this)}function a(a,b,e){var f=new WeakMap();c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"default_values_update_started");var g=function(a,b){c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"default_values_update_end_failure"),c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(25305590,"1127"),{string:{default_values_update_failure_point:b,default_values_update_failure_reason:String(a)}})};return i(f,a,e,b).then(function(b){var g,h,i,k,l;return c("nativePromiseRegeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.t0=c("nativePromiseRegeneratorRuntime").keys(b);case 1:if((m.t1=m.t0()).done){m.next=19;break}g=m.t1.value;h=e.entries(a,f,g,void 0,"asc",void 0);m.next=6;return c("nativePromiseRegeneratorRuntime").awrap(h.next());case 6:i=m.sent;case 7:if(i.done){m.next=17;break}k=babelHelpers["extends"]({},i.value[1]);l=d("ReStoreUtils").appendDefaultValues(k,g);m.next=12;return c("nativePromiseRegeneratorRuntime").awrap(e.put(a,f,g,l));case 12:m.next=14;return c("nativePromiseRegeneratorRuntime").awrap(h.next());case 14:i=m.sent;m.next=7;break;case 17:m.next=1;break;case 19:m.next=21;return c("nativePromiseRegeneratorRuntime").awrap(j(f,a,e,b));case 21:c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"default_values_update_end_success");case 22:case"end":return m.stop()}},null,this)},function(a){return g(a,"findDefaultValuesToUpdate")})["catch"](function(a){return g(a,"setDefaultValues")})}g.runMigrationForTableDefaultValuesIfNeeded=a}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreIndicesMigration",["QuickPerformanceLogger","ReStoreIndexMetadata","ReStoreUtils","nativePromiseRegeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r;return c("nativePromiseRegeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:f={};s.next=3;return c("nativePromiseRegeneratorRuntime").awrap(d("ReStoreUtils").collectIterator(e.entries(b,a,d("ReStoreIndexMetadata").indicesTableName,void 0,"asc",void 0)));case 3:g=s.sent,(h=g,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 5:if(!i){s.next=11;break}if(!(j>=h.length)){s.next=8;break}return s.abrupt("break",27);case 8:k=h[j++];s.next=15;break;case 11:j=h.next();if(!j.done){s.next=14;break}return s.abrupt("break",27);case 14:k=j.value;case 15:l=k;m=l[0];n=l[1];if(!(m!=null)){s.next=25;break}p=d("ReStoreIndexMetadata").tryParseIndexData(n);if(!(p==null)){s.next=22;break}return s.abrupt("continue",25);case 22:(q=p.indexName,r=p.tableName),f[r]=(o=f[r])!=null?o:{},f[r][q]={index:p.data,key:m};case 25:s.next=5;break;case 27:return s.abrupt("return",f);case 28:case"end":return s.stop()}},null,this)}function i(a,b,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return c("nativePromiseRegeneratorRuntime").async(function(z){while(1)switch(z.prev=z.next){case 0:z.next=2;return c("nativePromiseRegeneratorRuntime").awrap(h(a,b,e));case 2:g=z.sent;i={};for(j in f.tableNames){k=f.tableNames[j];for(l in k.indexes)n=k.indexes[l],o=(m=g[j])==null?void 0:m[l],d("ReStoreIndexMetadata").indicesDiffer(o==null?void 0:o.index,n)&&(i[j]=(p=i[j])!=null?p:{},i[j][l]=n)}q={};for(r in g){s=g[r];for(t in s)w=s[t],x=(u=f.tableNames[r])==null?void 0:(v=u.indexes)==null?void 0:v[t],x==null&&(q[r]=(y=q[r])!=null?y:{},q[r][t]=w)}return z.abrupt("return",{toRemove:q,toUpdate:i});case 8:case"end":return z.stop()}},null,this)}function j(a,b,e,f){var g,h,i,j,k;return c("nativePromiseRegeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.t0=c("nativePromiseRegeneratorRuntime").keys(f);case 1:if((l.t1=l.t0()).done){l.next=15;break}g=l.t1.value;h=f[g];l.t2=c("nativePromiseRegeneratorRuntime").keys(h);case 5:if((l.t3=l.t2()).done){l.next=13;break}i=l.t3.value;j=h[i];k={data:j,indexName:i,tableName:g};l.next=11;return c("nativePromiseRegeneratorRuntime").awrap(e.put(b,a,d("ReStoreIndexMetadata").indicesTableName,d("ReStoreIndexMetadata").indexDataToValue(k)));case 11:l.next=5;break;case 13:l.next=1;break;case 15:case"end":return l.stop()}},null,this)}function k(a,b,e,f){var g,h,i,j;return c("nativePromiseRegeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.t0=c("nativePromiseRegeneratorRuntime").keys(f);case 1:if((k.t1=k.t0()).done){k.next=14;break}g=k.t1.value;h=f[g];k.t2=c("nativePromiseRegeneratorRuntime").keys(h);case 5:if((k.t3=k.t2()).done){k.next=12;break}i=k.t3.value;j=h[i].key;k.next=10;return c("nativePromiseRegeneratorRuntime").awrap(e["delete"](b,a,d("ReStoreIndexMetadata").indicesTableName,j));case 10:k.next=5;break;case 12:k.next=1;break;case 14:case"end":return k.stop()}},null,this)}function a(a,b,d){var e=new WeakMap();c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"index_migration_started");var f=function(a,b){c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"index_migration_end_failure"),c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(25305590,"1127"),{string:{index_migration_failure_point:b,index_migration_failure_reason:String(a)}})};return i(e,a,d,b).then(function(f){var g,h,i,l,m,n,o,p;return c("nativePromiseRegeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:(g=f.toRemove,h=f.toUpdate),i=Array.from(new Set([].concat(Object.keys(h),Object.keys(g)))),c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(25305590,"1127"),{"int":{index_migration_rebuild_tables_count:i.length},string_array:{index_migration_rebuilt_tables:i}}),l=0;case 4:if(!(l<i.length)){q.next=13;break}m=i[l];if(!(b.tableNames[m]!=null)){q.next=10;break}p=Array.from(new Set([].concat(Object.keys((n=h[m])!=null?n:{}),Object.keys((o=g[m])!=null?o:{}))));q.next=10;return c("nativePromiseRegeneratorRuntime").awrap(d.rebuildIndices(a,e,m,p));case 10:l++;q.next=4;break;case 13:q.next=15;return c("nativePromiseRegeneratorRuntime").awrap(j(e,a,d,h));case 15:q.next=17;return c("nativePromiseRegeneratorRuntime").awrap(k(e,a,d,g));case 17:c("QuickPerformanceLogger").markerPoint(c("qpl")._(25305590,"1127"),"index_migration_end_success");case 18:case"end":return q.stop()}},null,this)},function(a){return f(a,"findIndicesToUpdateOrRemove")})["catch"](function(a){return f(a,"rebuildIndices")})}g.runMigrationForIndicesIfNeeded=a}),98);
__d("ReStorePersistence",["PromiseOrValue","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(l,m,n){return(l.has(m)?l:l.set(m,n())).get(m)}function j(l){if(l==null)return l;var m=Object.getOwnPropertyNames(l),j={},n,o;for(n=0;n<m.length;n++)o=l[m[n]],j[m[n]]=Array.isArray(o)?[].concat(o):o;return j}function k(l){return{clearCache:l.clearCache,close:l.close,createTransaction:function(){var m=new Map();return{flush:async function(){await l.flush(m)},table:function(n){function o(s,t){var u=q.get(t);if(u===h)return void 0;return u!==void 0?u:l.get(s,n,t)}function p(s,t){return d("PromiseOrValue").map(o(s,t),function(u){if(u===void 0)throw c("unrecoverableViolation")("Got unexpected undefined","messenger_web_product");return u})}var q=i(m,n,function(){return new Map()});function r(s,t){return{read:function*(u){var v=o(s,u);return v instanceof window.Promise?yield v:v},readExn:function*(u){var v=p(s,u);return v instanceof window.Promise?yield v:v},readHeader:function*(){var u=o(s,t);return u instanceof window.Promise?yield u:u},remove:function*(u){q.set(u,h)},removeHeader:function*(){q.set(t,h)},write:function*(u,v){q.set(u,v)},writeHeader:function*(u){q.set(t,u)},writeNew:function*(u){var v=d("PromiseOrValue").map(o(s,"nextId"),function(v){v===void 0&&(v=0);q.set("nextId",v+1);q.set(v,u);return v});return v instanceof window.Promise?yield v:v}}}return{getBPlusTreeStore:r,incrementSeed:function(s,t){return d("PromiseOrValue").map(o(s,"seed"),function(u){u===void 0&&(u=0);q.set("seed",Math.max(u,t||0)+1);return t===void 0?u:t})},readData:function*(s,t){var u=o(s,t);return u instanceof window.Promise?yield u:u},readDataExn:function*(s,t){var u=p(s,t);return u instanceof window.Promise?yield u:u},readSeed:function(s){return d("PromiseOrValue").map(o(s,"seed"),function(t){t===void 0&&(t=0);return t})},remove:function(s,t){q.set(t,h)},writeData:function(s,t,u){q.set(t,j(u))},writeNewData:function(s,t){return d("PromiseOrValue").map(o(s,"nextId"),function(u){u===void 0&&(u=0);q.set("nextId",u+1);q.set(u,j(t));return u})}}}}},releaseLockIfNeeded:l.releaseLockIfNeeded,waitForLock:l.waitForLock}}g.sentinelDeleted=h;g.createDbStore=k}),98);
__d("ReStoreTransactionLock",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={chainPromiseOrValue:function(k){return k(h)}},i=function(){function i(l){var m=this;this.waitFor=null;l!=null&&(this.waitFor=l.then(function(n){return m.waitFor=null}))}var k=i.prototype;k.chainPromiseOrValue=function(l){if(this.waitFor!=null)return this.waitFor.then(function(){return l(h)});else return l(h)};return i}(),j=function(){function j(){this.lock=null}var k=j.prototype;k.chainPromiseOrValue=function(l){var m=this;if(!c("gkx")("3174"))return h.chainPromiseOrValue(l);var n=this.lock;if(n==null){var o=l(h);if(o instanceof window.Promise)n=o;else return o}else n=n.then(function(){return l(h)});var p=n.then(function(q){m.lock===p&&(m.lock=null);return q}).finally(function(q){m.lock===p&&(m.lock=null)});this.lock=p;return p};return j}();g.WaitForPromiseLock=i;g.ReStoreTransactionLock=j}),98);
__d("EncryptedBackupsDbStorageAllowlist",["ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";a=new Set([d("ReStoreIndexMetadata").indicesTableName,"encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_recovery_code_data","secure_encrypted_backups_message_thread_id_context","secure_encrypted_backups_recovery_code_status","secure_encrypted_backups_generated_recovery_code","device_metadata","secure_encrypted_backups_qr_add_device_context","encrypted_backup_restore_task_payload_context"]);b=a;g["default"]=b}),98);
__d("ReQLBounds.bs",["LSDbKeyComparer.bs","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c){if(!b)return c;if(a<=0)return c;var d=b.hd;if(a===1)return{hd:d,tl:0};else return{hd:d,tl:g(a-1|0,b.tl,c)}}function a(a,c){return g(a,c,{hd:b("LSDbKeyComparer.bs").maxKey,tl:0})}function c(a,c){a=function(a){var b=a.NAME;if(b==="lessThan")return["lt",a.VAL];else if(b==="greaterThan")return["gt",a.VAL];else if(b==="greaterThanOrEqual")return["gte",a.VAL];else return["lte",a.VAL]};var d=c.NAME;if(d!=="range")if(d==="greaterThanOrEqual"||d==="greaterThan")return b("bs_js_dict").fromArray([a(c)]);else return b("bs_js_dict").fromArray([a(c)]);d=c.VAL;return b("bs_js_dict").fromArray([a(d[0]),a(d[1])])}function d(a){var c=a.operation;switch(c){case"add":return{TAG:0,_0:a.value};case"delete":return 0;case"put":return{TAG:1,_0:a.value};default:return b("unrecoverableViolation")("Unexpected operation","messenger_web_product")}}f.concat=g;f.nextKey=a;f.mapBounds=c;f.mapEventToOperation=d}),null);
__d("IntervalList",["FBLogger","LSDbKeyComparer","ReQLBounds.bs","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("must not be null");return a}function a(a,c){var e=b("regeneratorRuntime").mark(k),f=new Map(),g=new Map(),i=new Map();function j(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function k(a){var h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:h=a,i={hd:d("LSDbKeyComparer").MAX_KEY,tl:0},k=0;case 3:if(!(h!==0&&g.size)){b.next=33;break}k++;l=h;m=h.tl;h.tl=k<c?i:0;b.prev=8;n=g.get(JSON.stringify(a));if(!(n!=null)){b.next=27;break}o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 12:if(!p){b.next=18;break}if(!(q>=o.length)){b.next=15;break}return b.abrupt("break",27);case 15:r=o[q++];b.next=22;break;case 18:q=o.next();if(!q.done){b.next=21;break}return b.abrupt("break",27);case 21:r=q.value;case 22:s=r;b.next=25;return s;case 25:b.next=12;break;case 27:b.prev=27;l.tl=m;return b.finish(27);case 30:h=l.tl;b.next=3;break;case 33:t=f.entries(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 34:if(!u){b.next=40;break}if(!(v>=t.length)){b.next=37;break}return b.abrupt("break",52);case 37:w=t[v++];b.next=44;break;case 40:v=t.next();if(!v.done){b.next=43;break}return b.abrupt("break",52);case 43:w=v.value;case 44:x=w;y=x[0];z=x[1];if(!(f.has(y)&&j(a,z))){b.next=50;break}b.next=50;return y;case 50:b.next=34;break;case 52:case"end":return b.stop()}},e,this,[[8,,27,30]])}function l(a){var b=i.get(a);if(b!=null){i["delete"](a);var c=h(g.get(b));c["delete"](a);c.size===0&&g["delete"](b)}else f["delete"](a)}function m(a,b){var e;if(a&&a.gte!=null&&a.lte!=null&&(e=JSON.stringify(d("ReQLBounds.bs").nextKey(c,a.gte)))===JSON.stringify(a.lte)){var h=g.get(e);h==null&&(h=new Set(),g.set(e,h));h.add(b);i.set(b,e)}else f.set(b,a)}return{"delete":l,findIntersecting:k,set:m}}g["default"]=a}),98);
__d("createReStoreSubscriptionManager",["EncryptedBackupsDbStorageAllowlist","IntervalList","LSDbKeyComparer","LSPersistedDbGating","LSStorage","Promise","cr:181","killswitch","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=new Map(),f=new Map();function g(a,c,d,e){return b("Promise").all(Array.from(a.findIntersecting(d)).map(function(a){return a(d,e,c)}))}function h(b){return c("nullthrows")((e.has(b)?e:e.set(b,[c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function i(b,e){var f=h(b);f[0];f=f[1];return c("nullthrows")((f.has(e)?f:f.set(e,c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].indexes[e].length))).get(e))}function j(e,f,h,i,j,k){var l=function(a,b){return g(e,k,a,b)},m=h==null?void 0:d("LSStorage").searchKey(a,f,h,j),n=i==null?void 0:d("LSStorage").searchKey(a,f,i,j);if(n==null&&m!=null)return l(m,{operation:"delete",prevValue:h});if(m==null&&n!=null)return l(n,{operation:"add",value:c("nullthrows")(i)});return m!=null&&n!=null?d("LSDbKeyComparer").compareKey(m,n)===0?l(m,{operation:"put",prevValue:h,value:c("nullthrows")(i)}):l(m,{operation:"delete",prevValue:h}).then(function(){return l(n,{operation:"add",value:c("nullthrows")(i)})}):b("Promise").resolve()}function k(a,e,f,g,i){i===void 0&&(i=!1);if(!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&i&&b("cr:181")!=null){i=d("LSPersistedDbGating").allTablesPersisted||c("EncryptedBackupsDbStorageAllowlist").has(a);i&&b("cr:181").postMessage("notifyTable",[a,e,f])}i=h(a);var k=i[0],l=i[1];return j(k,a,e,f,null,g).then(function(){return b("Promise").all(Array.from(l.entries()).map(function(b){var c=b[0];b=b[1];return j(b,a,e,f,c,g)}).filter(function(a){return a!=null}))})}function l(a){a===void 0&&(a=!1),!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&a&&b("cr:181")!=null&&b("cr:181").postMessage("notifyCommit"),f.forEach(function(a){return a()})}!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("cr:181")!=null&&(b("cr:181").onEventReceive("notifyTable",function(a){var b=a[0],d=a[1];a=a[2];var e=new WeakMap();c("promiseDone")(k(b,d,a,e,!1))}),b("cr:181").onEventReceive("notifyCommit",function(a){l(!1)}));return{dispose:function(){e.clear(),f.clear()},notifyCommit:l,notifyTableAndIndexSubscribers:k,subscribeIndex:function(a,c,d,e){var f=i(a,c),g=!1,h=function(a,c,e){return g?b("Promise").resolve():d(a,c,e)};f.set(e,h);return function(){g=!0,f["delete"](h)}},subscribeTable:function(a,c,d){a=h(a);var e=a[0],f=!1,g=function(a,d,e){return f?b("Promise").resolve():c(a,d,e)};e.set(d,g);return function(){f=!0,e["delete"](g)}},subscribeToCommit:function(a){f.set(a,a);return function(){f["delete"](a)}}}}g["default"]=a}),98);
__d("ReStore",["BPlusTreeBase","FBLogger","I64","LSDbKeyComparer","LSStorage","PromiseOrValue","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStorePersistence","ReStoreTransactionLock","ReStoreUtils","clearTimeout","createReStoreSubscriptionManager","err","gkx","setTimeout","unrecoverableViolation"],(function(aa,ba,a,b,ca,da,ea){"use strict";var fa=function(e){babelHelpers.inheritsLoose(fa,e);function fa(){return e.call(this,"Transaction has finished")||this}return fa}(babelHelpers.wrapNativeSuper(Error));function ga(e){var f=b("I64").cast(e);if(f===void 0)throw a("unrecoverableViolation")("Expected int64","messenger_web_product");return b("I64").to_float(f)}function c(e,f){function g(h){if(h.done)return h.value;if(!(h.value instanceof Promise))throw a("unrecoverableViolation")("expected promise","messenger_web_product");return h.value.then(function(i){return g(e.next(i))})}return g(e.next(f))}function ha(e,f){return!a("gkx")("3174")?e:{next:function(g){return f.chainPromiseOrValue(function(){return e.next(g)})}}}function ia(e,f){if(!a("gkx")("3174"))return f;var g=babelHelpers.extends({},f),h=function(i){g[i]=function(){for(var j=arguments.length,k=new Array(j),l=0;l<j;l++)k[l]=arguments[l];return e.chainPromiseOrValue(function(){return f[i].apply(f,k)})}};for(var i in f)h(i);g.entries=function(j,k,l,m,n,la){return ha(f.entries(j,k,l,m,n,la),e)};return g}function d(e,f,g){return a("BPlusTreeBase")(b("LSDbKeyComparer").compareKey,16,f.getBPlusTreeStore(e,g==null?"root":"index("+g+")"))}function ja(e,f,g){return(e.has(f)?e:e.set(f,g())).get(f)}function ka(e,f){var g=b("ReStorePersistence").createDbStore(e),h=a("createReStoreSubscriptionManager")(f),i=ba("LSStorage").searchKey.bind(null,f),j=Promise.resolve(),k=new Map(),l=null;function m(p,q,r){return!q||p<=0?r:{hd:q.hd,tl:p===1?0:m(p-1,q.tl,r)}}function n(p,q){if(p==null)return void 0;var r=babelHelpers.extends({},p);r.gt!=null&&(r.gt=m(q,r.gt,{hd:b("LSDbKeyComparer").MAX_KEY,tl:0}));r.lte!=null&&(r.lte=m(q,r.lte,{hd:b("LSDbKeyComparer").MAX_KEY,tl:0}));return r}function la(p,q){return function(r){return{add:async function(s){var t;try{a("gkx")("3827")&&(t=a("setTimeout")(function(){a("FBLogger")("messenger_web_product").mustfix("ReStore add took longer than 10 seconds to execute")},1e4));return await q.add(p,new WeakMap(),r,s)}finally{t!=null&&a("clearTimeout")(t)}},delete:function(s){return q.delete(p,new WeakMap(),r,s)},deleteThenInsert:function(s){return q.deleteThenInsert(p,new WeakMap(),r,s)},entries:function(s,t,u){t===void 0&&(t="asc");return q.entries(p,s,r,void 0,t,u)},get:function(s,t){t===void 0&&(t=new WeakMap());return q.get(p,t,r,void 0,s)},index:function(s){return{entries:function(t,u,v){u===void 0&&(u="asc");return q.entries(p,t,r,s,u,v)},get:function(t){return q.get(p,new WeakMap(),r,s,t)},getKey:function(t){return q.getKey(p,new WeakMap(),r,s,t)}}},peekNextAutoIncrementId:function(){return q.peekNextAutoIncrementId(p,new WeakMap(),r)},put:function(s){return q.put(p,new WeakMap(),r,s)},upsert:function(s,t){return q.upsert(p,new WeakMap(),r,s,t)}}}}function ma(p){function q(D,E,F,G){var H=JSON.stringify([D,E]),I=p.get(H);p.set(H,[I==null?F:I[0],G])}async function r(D,E,F,G,H){var I=D.table(F),J=d(E,I,G),K=await c(J.getWithDefault(H,void 0));return K===void 0?void 0:c(I.readDataExn(E,K))}async function s(D,E,F,G,H){var I=await r(D,E,F,G,H);return I===void 0?void 0:i(F,I)}function t(D,E,F,G,H,I){function J(){var K,L=D.table(F),M=d(E,L,G),N=M.entries(babelHelpers.extends({},n(I,(G===void 0?f.tableNames[F].primaryKeyIds:f.tableNames[F].indexes[G]).length),{dir:H}));return K={next:function(O){return b("PromiseOrValue").map(c(N.next(O)),function(P){return P.done?{done:!0}:b("PromiseOrValue").map(c(L.readDataExn(E,P.value[1])),function(Q){return{done:!1,value:[P.value[0],Q]}})})}},K[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=J,K}return J()}async function u(D,E,F,G,H){function I(S,T){var U=[],V=S;while(V!==0)U.push(V.hd),V=V.tl;return U.length>=T?S:U.reduceRight(function(W,X){return{hd:X,tl:W}},{hd:b("LSDbKeyComparer").MAX_KEY,tl:0})}if(H!=null&&b("LSDbKeyComparer").compareKey(G,H)===0)return;var J=f.tableNames[F],K=J.cascadeUpdates,L=J.primaryKeyIds,M=async function(){if(O){if(P>=N.length)return"break";Q=N[P++]}else{P=N.next();if(P.done)return"break";Q=P.value}var S=Q,T=S.indexName,F=S.tableName,U=f.tableNames[F],V=U.indexes,W=U.primaryKeyIds,X=T==null?W:V[T],sa={gte:G,lte:I(G,X.length)},ta=await b("ReStoreUtils").collectIterator(t(D,E,F,T,"asc",sa));for(var Y=ta,Z=Array.isArray(Y),$=0,Y=Z?Y:Y[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var ua;if(Z){if($>=Y.length)break;ua=Y[$++]}else{$=Y.next();if($.done)break;ua=$.value}var va=ua;va[0];var wa=va[1],xa=i(F,wa);if(H===void 0)await y(D,E,F,xa),await u(D,E,F,xa,void 0);else{var ya=L.reduce(function(za,Aa,Ba){var Ca=za[0],H=za[1];if(!H)return[Ca,H];Ca[X[Ba]]=H.hd;return[Ca,H.tl]},[babelHelpers.extends({},wa),H])[0];await x(D,E,F,xa,ya);await u(D,E,F,xa,i(F,ya))}}};for(var N=K,O=Array.isArray(N),P=0,N=O?N:N[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var Q,R=await M();if(R==="break")break}}async function v(D,E,F){var G=f.tableNames[F].autoIncrement;if(!G)throw a("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");var H=await D.table(F).readSeed(E);if(H===void 0)throw a("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");return b("I64").of_float(H)}async function w(D,E,F,G){var H=D.table(F),I=d(E,H),J=f.tableNames[F],K=i(F,G),L={},M=await c(I.getWithDefault(K,void 0)),N,O=G;if(M!==void 0)N=await c(H.readDataExn(E,M)),L=z(Object.keys(J.indexes),F,N),H.writeData(E,M,G);else{if(J.autoIncrement)throw a("unrecoverableViolation")("Id must not be specified for new record when table has an autoincrementing primary key","messenger_web_product");O=b("ReStoreUtils").appendDefaultValues(G,J.name);M=await H.writeNewData(E,O);await c(I.set(K,M))}var P=z(Object.keys(J.indexes),F,O),Q=Object.keys(P);for(var R=0;R<Q.length;R++){var S=Q[R];L[S]!==void 0&&b("LSDbKeyComparer").compareKey(L[S],P[S])===0&&(delete P[S],delete L[S])}await A(D,E,F,P);await B(D,E,F,M,P);var T=Object.keys(L);for(var U=0;U<T.length;U++){var V=T[U],W=d(E,H,V);await c(W.delete(L[V]))}q(F,K,N,O)}async function x(D,E,F,G,H){var I=i(F,H);b("LSStorage").areKeysEqual(G,I)||await y(D,E,F,G);await w(D,E,F,H)}async function y(D,E,F,G){var H=D.table(F),I=d(E,H),J=f.tableNames[F],K=await c(I.getWithDefault(G,void 0)),L;if(K!==void 0){L=await c(H.readDataExn(E,K));if(Object.keys(J.indexes).length){var M=Object.keys(J.indexes);for(var N=0;N<M.length;N++){var O=M[N],P=i(F,L,O);if(P!=null){var Q=d(E,H,O);await c(Q.delete(P))}}}await c(I.delete(G));H.remove(E,K);q(F,G,L,void 0)}}function z(D,E,F){return D.reduce(function(G,H){var I=i(E,F,H);G[H]=I;return G},{})}async function A(D,E,F,G){var H=D.table(F),I=new Set(),J=Object.keys(G);for(var K=0;K<J.length;K++){var L=J[K],M=d(E,H,L),N=G[L],O=await c(M.getWithDefault(N));if(O!=null&&!I.has(O)){var P=i(F,await c(H.readDataExn(E,O)));await y(D,E,F,P);await u(D,E,F,P,void 0);I.add(O)}}}async function B(D,E,F,G,H){var I=D.table(F),J=Object.keys(H);for(var K=0;K<J.length;K++){var L=J[K],M=d(E,I,L),N=H[L];await c(M.set(N,G))}}async function C(D,E,F,G){var H=D.table(F),I=d(E,H),J=f.tableNames[F];if(J.autoIncrement){var K=G[f.tableNames[F].primaryKeyIds[0]],L=b("I64").of_float(await H.incrementSeed(E,K===void 0?K:ga(K)));G[f.tableNames[F].primaryKeyIds[0]]=L}var M=b("ReStoreUtils").appendDefaultValues(G,J.name),N=i(F,M);if(N==null)throw new Error("Evaluating the object store's key path did not yield a value");if(!await c(I.has(N))){var O=z(Object.keys(J.indexes),F,M);await A(D,E,F,O);var P=await H.writeNewData(E,M);await c(I.set(N,P));await B(D,E,F,P,O);q(F,N,void 0,M)}}async function ra(D,E,F,G){var H=D.table(F),I=G.map(function(Y){return d(E,H,Y)});for(var J=I,K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M;await c(N.clear())}var O=G.filter(function(Y){var Z;return((Z=f.tableNames[F])==null?void 0:Z.indexes[Y])!=null});if(O.length===0)return;var P=d(E,H),Q=await b("ReStoreUtils").collectIterator(t(D,E,F,void 0,"asc",void 0));for(var R=Q,S=Array.isArray(R),T=0,R=S?R:R[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var U;if(S){if(T>=R.length)break;U=R[T++]}else{T=R.next();if(T.done)break;U=T.value}var V=U,W=V[0],X=V[1],sa=z(O,F,X);await A(D,E,F,sa);var ta=await c(P.get(W));await B(D,E,F,ta,sa)}}return{add:C,delete:async function(D,E,F,G){await y(D,E,F,G),await u(D,E,F,G,void 0)},deleteThenInsert:async function(D,E,F,G){await w(D,E,F,G),await u(D,E,F,i(F,G),void 0)},entries:t,get:r,getKey:s,peekNextAutoIncrementId:v,put:w,rebuildIndices:ra,upsert:async function(D,E,F,G,H){await x(D,E,F,G,H),await u(D,E,F,G,i(F,H))}}}function na(p,q){var r=new(b("ReStoreTransactionLock").ReStoreTransactionLock)();return{table:la(p,ia(new(b("ReStoreTransactionLock").WaitForPromiseLock)(l),ia(r,ma(q))))}}async function oa(p,q){var r=g.createTransaction(),s=await p(na(r,q),r);await r.flush();return s}var o={background:{first:null,last:null},ui:{first:null,last:null}};async function pa(p,q){o[q].last==null?o[q].first=o[q].last={value:p}:o[q].last=o[q].last.next={value:p};try{await g.waitForLock();var r=o.ui.first==null?o.background:o.ui;if(r.first==null){a("FBLogger")("messenger_web_product").mustfix("Expected work is missing");return}var s=r.first;r.first===r.last&&(r.last=null);r.first=r.first.next;await s.value()}finally{await g.releaseLockIfNeeded()}}function qa(p,q,r){r===void 0&&(r="background");var s=new Map(),t;a("gkx")("3827")&&(t=a("err")(""));return new Promise(function(u,v){j=j.then(function(){return pa(async function(){var w;try{a("gkx")("3827")&&(w=a("setTimeout")(function(){a("FBLogger")("messenger_web_product").catching(t).mustfix("ReStore transaction took longer than 10 seconds to execute")},1e4));var x=await oa(function(J,K){return p(J)},s);w!=null&&a("clearTimeout")(w);var y=new WeakMap();for(var z=s,A=Array.isArray(z),B=0,z=A?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var C;if(A){if(B>=z.length)break;C=z[B++]}else{B=z.next();if(B.done)break;C=B.value}var ra=C,D=ra[0],E=ra[1],F=E[0],G=E[1],H=JSON.parse(D),I=H[0];H[1];await h.notifyTableAndIndexSubscribers(I,F,G,y,!0)}u(x)}catch(J){a("gkx")("3827")&&w!=null&&a("clearTimeout")(w),v(J)}h.notifyCommit(!0)},r)})})}a("gkx")("6477")&&(j=j.then(function(){return pa(function(){var p=new Map();return oa(async function(q,r){await b("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(r,f,ma(p))},p)},"background")}),l=j);a("gkx")("4547")&&(j=j.then(function(){return pa(function(){var p=new Map();return oa(async function(q,r){await b("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(r,f,ma(p))},p)},"background")}),l=j);return{clearCacheIfSupported:function(){var p=g;p instanceof Object&&p.clearCache!==void 0&&p.clearCache instanceof Function&&p.clearCache()},closeDb:function(){var p=g;p instanceof Object&&p.close!==void 0&&p.close()},getTableData:function(){return f},runInTransaction:qa,subscribeToCommit:function(p){return h.subscribeToCommit(p)},subscriptionManager:h,table:function(p){return ja(k,p,function(){var q=new Map(),r=ia(new(b("ReStoreTransactionLock").WaitForPromiseLock)(l),ma(new Map())),s=r.entries,t=r.get,u=r.getKey,v=r.peekNextAutoIncrementId;return{entries:function(w,x,y){x===void 0&&(x="asc");return ha(s(g.createTransaction(),w,p,void 0,x,y),new(b("ReStoreTransactionLock").ReStoreTransactionLock)())},get:function(w,x){x===void 0&&(x=new WeakMap());return t(g.createTransaction(),x,p,void 0,w)},index:function(w){return ja(q,w,function(){return{entries:function(x,y,z){y===void 0&&(y="asc");return ha(s(g.createTransaction(),x,p,w,y,z),new(b("ReStoreTransactionLock").ReStoreTransactionLock)())},get:function(x,y){y===void 0&&(y=new WeakMap());return t(g.createTransaction(),y,p,w,x)},getKey:function(x){return u(g.createTransaction(),new WeakMap(),p,w,x)},subscribe:function(x,y){return h.subscribeIndex(p,w,x,n(y,f.tableNames[p].indexes[w]))}}})},peekNextAutoIncrementId:function(){return v(g.createTransaction(),new WeakMap(),p)},subscribe:function(w,x){return h.subscribeTable(p,w,n(x,f.tableNames[p].primaryKeyIds.length))}}})}}}ka.TransactionClosedError=fa;ea.default=ka}),98);
__d("createReStoreEphemeralPersistence",["ReStorePersistence","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(){var a=new Map();function c(b){return h(a,b,function(){return new Map()})}return{flush:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.forEach(function(a,b){var e=c(b);a.forEach(function(a,b){a===d("ReStorePersistence").sentinelDeleted?e["delete"](b):e.set(b,a)})});case 1:case"end":return b.stop()}},null,this)},get:function(a,b,d){a=c(b);return a.get(d)},releaseLockIfNeeded:function(){return window.Promise.resolve()},waitForLock:function(){return window.Promise.resolve()}}}g["default"]=a}),98);
__d("LSDict",["nativePromiseRegeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.tag="ls-array";return a}a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return[JSON.stringify(b),a]}));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return this.$1.get(JSON.stringify(a))};b.set=function(a,b){this.$1.set(JSON.stringify(a),b);return this};b["delete"]=function(a){return this.$1["delete"](JSON.stringify(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a,b){var c=this;this.$1.forEach(function(b,d){return a(b,JSON.parse(d),c)},b)};b.$2=function(){return this.$1.size};b.has=function(a){return this.$1.has(JSON.stringify(a))};b.entries=c("nativePromiseRegeneratorRuntime").mark(function a(){var b,d,e,f,g,h,i;return c("nativePromiseRegeneratorRuntime").wrap(function(a){while(1)switch(a.prev=a.next){case 0:b=this.$1.entries(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){a.next=7;break}if(!(e>=b.length)){a.next=4;break}return a.abrupt("break",18);case 4:f=b[e++];a.next=11;break;case 7:e=b.next();if(!e.done){a.next=10;break}return a.abrupt("break",18);case 10:f=e.value;case 11:g=f;h=g[0];i=g[1];a.next=16;return[JSON.parse(h),i];case 16:a.next=1;break;case 18:case"end":return a.stop()}},a,this)});b.keys=function(){return h(Array.from(this.$1.keys()).map(function(a){return JSON.parse(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSInt64.bs",["bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){return a}c=b("bs_int64").compare;d=b("bs_int64").equal;e=b("bs_int64").to_string;f.compare=c;f.equal=d;f.string=e;f.ofString=a}),null);
__d("LSJson",["LSDict","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=512;function i(a,b){b===void 0&&(b=0);if(b>h)throw c("unrecoverableViolation")("recursion limit exceeded","messenger_comet");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a){return i(a,b+1)}).join(",")+"]":d("bs_caml_int64").to_string(a);else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+i(a,b+1);else throw c("unrecoverableViolation")("key must be a string","messenger_comet")}).join(",")+"}";throw c("unrecoverableViolation")("type not supported: %s"+typeof a,"messenger_comet")}g.stringify=i}),98);
__d("LSLogHistory.bs",[],(function(a,b,c,d,e,f){"use strict";var g={contents:[]};function a(a){return g.contents}function b(a){g.contents=[]}function c(a,b){g.contents.push({date:Date.now(),level:b,category:"lightspeed_log",event:"lightspeed_log_event",args:a})}f.getEntries=a;f.clearEntries=b;f.log=c}),null);
__d("LSLogHistory.re",["LSLogHistory.bs","bs_curry"],(function(a,b,c,d,e,f){a=b("LSLogHistory.bs").getEntries;f.getEntries=a;c=function(a,c){a=b("bs_curry")._2(b("LSLogHistory.bs").log,a,c);return a};f.log=c}),null);
__d("LSIterationHelpers",["FBLogger","LSDbKeyComparer","LSDict","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(x){var y=[];while(x!==0)y.push(x.hd),x=x.tl;return y}function i(x){return x.reduceRight(function(y,z){return{hd:z,tl:y}},0)}function j(x,y,z){z===void 0&&(z="asc");var A=x.entries(new WeakMap(),z);function B(){var C;return C={},C[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=B,C.next=async function(){var D=await A.next();outer:while(!D.done){var E=async function(F){var H=y[F]||{},I=H.end,J=H.start,K=h(D.value[0]),L=K.slice(0,F);if(J){var M=d("LSDbKeyComparer").compareValue(K[F],J[0]);if(M*(z==="asc"?1:-1)<J[1]){if(F===K.length-1&&M===0)D=await A.next();else{var N=[].concat(L,[J[0]],J[1]&&z==="asc"||!J[1]&&z==="desc"?[d("LSDbKeyComparer").MAX_KEY]:[]);D=await A.next(i(N))}if(D.done)return{v:{done:!0}};K=h(D.value[0]);if(!L.every(function(O,F){return d("LSDbKeyComparer").compareValue(O,K[F])===0}))return"continue|outer"}}if(I&&d("LSDbKeyComparer").compareValue(I[0],K[F])*(z==="asc"?1:-1)<I[1]){D=await A.next(i([].concat(K.slice(0,F),z==="asc"?[d("LSDbKeyComparer").MAX_KEY]:[])));return"continue|outer"}};for(var F=0;F<y.length;F++){var G=await E(F);switch(G){case"continue|outer":continue outer;default:if(typeof G==="object")return G.v}}break}return D},C}return B()}function k(x,y){var z;return z={},z[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=k.bind(null,x,y),z.next=async function(){var A=await x.next();while(!A.done&&!await y(A.value.item))A=await x.next();return A},z}function l(x,y,z){var A,B=0;return A={},A[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=l.bind(null,x,y,z),A.next=async function(){while(B<y){var C=await x.next(),D=C.done;if(D){c("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",y);return{done:!0}}B++}if(B<z){B++;return x.next()}return{done:!0}},A}async function m(x,y){var z=await x.next(),A=[];while(!z.done)A.push(z.value),z=await x.next();for(var B=0;B<A.length;B++){var C=A[B];await y(C)}}async function n(x){var y=[],z=await x.next();while(!z.done)y.push(z.value),z=await x.next();return y}function o(x,y,z){z===void 0&&(z=[]);var A={ASC:1,DESC:-1},B=function(D,E){var F=D.item,G=E.item;for(var H=0;H<y.length;H++){var I=y[H],J=I[0],K=F[J],L=G[J],M;K===void 0&&L===void 0?M=0:K===void 0&&L!==void 0?M=-1:K!==void 0&&L===void 0?M=1:M=d("LSDbKeyComparer").compareValue(K,L);if(M===0)continue;return M*A[y[H][1]]}return 0},C=function(){var D=babelHelpers.wrapAsyncGenerator(function*(){var E=(yield babelHelpers.awaitAsyncGenerator(x.next())),F,G=[];while(!E.done){var H=0;for(var I=z.length-1;I>=0;I--)H={hd:E.value.item[z[I]],tl:H};if(F!==void 0&&d("LSDbKeyComparer").compareKey(F,H)!==0){for(var J=G.sort(B),K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M;yield N}G=[]}E.done||G.push(E.value);F=H;E=(yield babelHelpers.awaitAsyncGenerator(x.next()))}if(G.length)for(var O=G.sort(B),P=Array.isArray(O),Q=0,O=P?O:O[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{Q=O.next();if(Q.done)break;R=Q.value}var S=R;yield S}});return function(){return D.apply(this,arguments)}}();return C()}async function p(x){var y=0,z=await x.next();while(!z.done)y++,z=await x.next();return c("bs_caml_int64").of_int32(y)}function q(x,y){return{forEach:async function(z){var A=await n(x),B=A.reduce(function(K,L){var I=L.item[y],J=(K.get(I)||0)+1;return K.set(I,J)},new(c("LSDict"))());for(var C=B.entries(),D=Array.isArray(C),E=0,C=D?C:C[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var F,G;if(D){if(E>=C.length)break;G=C[E++]}else{E=C.next();if(E.done)break;G=E.value}var H=G,I=H[0],J=H[1];await z((F={},F[y]=I,F.group_count=c("bs_caml_int64").of_int32(J),F))}}}}function r(x,y,z){return{delete:function(){return z.delete(x)},item:y,update:function(A){return z.upsert(x,babelHelpers.extends({},y,A))}}}function s(x,y){return t.apply(this,arguments)}function t(){t=babelHelpers.wrapAsyncGenerator(function*(x,y){var z=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(x.next()));z=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!z.done)yield z.value,z=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return t.apply(this,arguments)}function u(x,y,z){return v.apply(this,arguments)}function v(){v=babelHelpers.wrapAsyncGenerator(function*(x,y,z){var A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()));while(!A.done&&!B.done){var C=d("LSDbKeyComparer").compareKey(A.value[0],B.value[0]);C===0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next())),B=(yield babelHelpers.awaitAsyncGenerator(y.next()))):C*(z==="asc"?1:-1)<0?(yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()))):(yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next())))}while(!A.done)yield A.value,A=(yield babelHelpers.awaitAsyncGenerator(x.next()));while(!B.done)yield B.value,B=(yield babelHelpers.awaitAsyncGenerator(y.next()))});return v.apply(this,arguments)}function w(x,y,z,A,B,C){var D=new Set(),E=x.length>1,F=x.length===1&&x[0][1]===void 0,G=x.map(function(I){var J=I[0],K=I[1];return J.map(function(L){A.key_lookup===!0&&L.length!==0;A.table_scan===!0&&L.length===0;var M=L.map(function(P){return C(P,y)}),N=M.length===(K===void 0?z.primaryKeyIds:z.indexes[K]).length&&M.every(function(P){var Q=P.start,R=P.end;return Q&&R&&Q[0]===R[0]&&Q[1]===0&&R[1]===0});if(N){var O=function O(){var P,Q=!1;return P={},P[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=O,P.next=async function(){if(Q)return{done:!0};Q=!0;var R=i(M.map(function(T){var U=T.start;return U[0]})),S=await (K===void 0?B:B.index(K)).get(R);return!S?{done:!0}:{value:[R,S],done:!1}},P};return O()}return j(K===void 0?B:B.index(K),M,y)})}).flat().reduce(function(I,J){return x.length>1?s(I,J):u(I,J,y)});function H(){var I;return I={},I[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=H,I.next=async function(){var J,K,L,M=await G.next();while(!M.done){var N=M.value;K=N[0];L=N[1];J=F?K:z.primaryKeyIds.reduceRight(function(P,Q){return{hd:L[Q],tl:P}},0);if(E){var O=JSON.stringify(J);if(D.has(O)){M=await G.next();continue}D.add(O)}break}return M.done||J===void 0||L===void 0?{done:!0}:{done:!1,value:r(J,L,B)}},I}return H()}g.filter=k;g.slice=l;g.forEach=m;g.toArray=n;g.sortBy=o;g.count=p;g.groupBy=q;g.fetch=w}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("base64-js-1.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){g.byteLength=h;g.toByteArray=d;g.fromByteArray=e;var a=[],b=[],c=typeof Uint8Array!=="undefined"?Uint8Array:Array;h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var d=0,e=h.length;d<e;++d)a[d]=h[d],b[h.charCodeAt(d)]=d;b["-".charCodeAt(0)]=62;b["_".charCodeAt(0)]=63;function f(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");a===-1&&(a=b);b=a===b?0:4-a%4;return[a,b]}function h(a){a=f(a);var b=a[0];a=a[1];return(b+a)*3/4-a}function i(a,b,c){return(b+c)*3/4-c}function d(a){var d,e=f(a),g=e[0];e=e[1];var h=new c(i(a,g,e)),j=0;g=e>0?g-4:g;for(var k=0;k<g;k+=4)d=b[a.charCodeAt(k)]<<18|b[a.charCodeAt(k+1)]<<12|b[a.charCodeAt(k+2)]<<6|b[a.charCodeAt(k+3)],h[j++]=d>>16&255,h[j++]=d>>8&255,h[j++]=d&255;e===2&&(d=b[a.charCodeAt(k)]<<2|b[a.charCodeAt(k+1)]>>4,h[j++]=d&255);e===1&&(d=b[a.charCodeAt(k)]<<10|b[a.charCodeAt(k+1)]<<4|b[a.charCodeAt(k+2)]>>2,h[j++]=d>>8&255,h[j++]=d&255);return h}function j(b){return a[b>>18&63]+a[b>>12&63]+a[b>>6&63]+a[b&63]}function k(a,b,c){var d,e=[];for(var b=b;b<c;b+=3)d=(a[b]<<16&16711680)+(a[b+1]<<8&65280)+(a[b+2]&255),e.push(j(d));return e.join("")}function e(b){var c=b.length,d=c%3,e=[],f=16383;for(var g=0,h=c-d;g<h;g+=f)e.push(k(b,g,g+f>h?h:g+f));d===1?(g=b[c-1],e.push(a[g>>2]+a[g<<4&63]+"==")):d===2&&(g=(b[c-2]<<8)+b[c-1],e.push(a[g>>10]+a[g>>4&63]+a[g<<2&63]+"="));return e.join("")}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("base64-js",["base64-js-1.3.0"],(function(a,b,c,d,e,f){e.exports=b("base64-js-1.3.0")()}),null);
__d("LS",["FBLogger","I64","LSDbKeyComparer","LSDict","LSIterationHelpers","LSJson","LSLogHistory.re","ODS","QuickPerformanceLogger","base64-js","bs_caml","bs_caml_format","bs_caml_int64","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var x=babelHelpers.taggedTemplateLiteralLoose(["2"]);h=function(){return x};return x}function i(){var x=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return x};return x}function j(){var x=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return x};return x}function k(){var x=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return x};return x}var l="LS_WEB";function m(x){return x.name.match(/secure_|inbox(?!_)/i)}var n=babelHelpers.extends({},c("bs_caml_int64"),{eq:function(x,y){return x==null&&y==null||x!=null&&y!=null&&c("bs_caml").i64_eq(x,y)},neq:function(x,y){return x==null&&y!=null||x!=null&&y==null||x!=null&&y!=null&&c("bs_caml").i64_neq(x,y)},lt:c("bs_caml").i64_lt,gt:c("bs_caml").i64_gt,le:c("bs_caml").i64_le,ge:c("bs_caml").i64_ge,min:c("bs_caml").i64_min,max:c("bs_caml").i64_max,to_int32:function(q){return q==null?q:c("bs_caml_int64").to_int32(q)},to_string:function(q){return q==null?q:c("bs_caml_int64").to_string(q)},from_string:function(q){try{return c("bs_caml_format").caml_int64_of_string(q)}catch(x){throw c("unrecoverableViolation")('Unable to cast "'+q+'" to int64',"messenger_comet")}},random:function(){var x=a.crypto||a.msCrypto,y=Array.from(x.getRandomValues(new Uint32Array(2)));y[0]>>>=1;return y}});function o(x){return c("base64-js").toByteArray(x).buffer}var p={to_string:function(x){if(x==null)return void 0;var y=new TextDecoder();return y.decode(x)},of_string:function(x){if(x==null)return void 0;var y=new TextEncoder();return y.encode(x).buffer},eq:function(x,y){if(x==null&&y==null)return!0;if(x==null||y==null)return!1;var z=new Uint8Array(x),A=new Uint8Array(y);if(z.length!==A.length)return!1;for(var B=0;B<z.length;B++)if(z[B]!==A[B])return!1;return!0},neq:function(x,y){return!p.eq(x,y)},compareTo:function(x,y){var z=new Uint8Array(x),A=new Uint8Array(y),B=Math.min(z.length,A.length);for(var C=0;C<B;C++){var D=z[C]-A[C];if(D!==0)return D}return z.length===A.length?0:z.length-A.length},le:function(x,y){return p.compareTo(x,y)<=0},lt:function(x,y){return p.compareTo(x,y)<0},ge:function(x,y){return p.compareTo(x,y)>=0},gt:function(x,y){return p.compareTo(x,y)>0}};function q(x){if(x.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");var y=x[0],z=parseInt(y.substr(-8),16),A=parseInt(y.substr(0,y.length-8),16);return d("I64").asI64([A>>>1^-(z&1),((z>>>1)+(A&1)*2147483648^-(z&1))>>>0])}function r(x,y){if(typeof x==="object"&&!Array.isArray(x)){var z,A;if(y==="asc"){Object.prototype.hasOwnProperty.call(x,"gt")&&(z=[x.gt,1]);if(Object.prototype.hasOwnProperty.call(x,"gte")){if(z!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");z=[x.gte,0]}Object.prototype.hasOwnProperty.call(x,"lt")&&(A=[x.lt,1]);if(Object.prototype.hasOwnProperty.call(x,"lte")){if(A!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");A=[x.lte,0]}}else{Object.prototype.hasOwnProperty.call(x,"lt")&&(z=[x.lt,1]);if(Object.prototype.hasOwnProperty.call(x,"lte")){if(z!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");z=[x.lte,0]}Object.prototype.hasOwnProperty.call(x,"gt")&&(A=[x.gt,1]);if(Object.prototype.hasOwnProperty.call(x,"gte")){if(A!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");A=[x.gte,0]}}return{start:z,end:A}}return{start:[x,0],end:[x,0]}}function s(x,y,z){var A=x.table(y.name);return{add:function(B){return A.add(B)},fetch:function(){for(var B=arguments.length,C=new Array(B),D=0;D<B;D++)C[D]=arguments[D];return d("LSIterationHelpers").fetch(C.length===0?[[[[]],void 0]]:C,"asc",y,z,A,r)},fetchDesc:function(){for(var B=arguments.length,C=new Array(B),D=0;D<B;D++)C[D]=arguments[D];return d("LSIterationHelpers").fetch(C.length===0?[[[[]],void 0]]:C,"desc",y,z,A,r)},put:function(B){return A.deleteThenInsert(B)},peekNextAutoIncrementId:function(){return A.peekNextAutoIncrementId()}}}function t(x,y,z,A){return{table:function(B){var C=z.tableIds[B];if(y===0&&m(C))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return s(x,C,A)}}}function u(x){var y="unknown_sproc",z=x.displayName,A=/\[from (.*)\]/,B=A.exec(z);B!=null&&(y=B[1]);return y}var v=function(){var x=0,y={},z={};function A(H){var I,J=(I=z[H])!=null?I:0;z[H]=J+1}function B(H){if(H in y)return y[H];y[H]=x;x++;return y[H]}function C(H){var I=H.shouldLog,J=H.sprocName;A(J);if(!I)return;var K=B(J);c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerStart(c("qpl")._(25302991,"143"),K);c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:J}},{instanceKey:K})}function D(H,I){var J=H.shouldLog,K=H.sprocName;if(!J)return;var L=B(K),M=I==="success"?2:3;c("QuickPerformanceLogger")==null?void 0:c("QuickPerformanceLogger").markerEnd(c("qpl")._(25302991,"143"),M,L)}function E(H){D(H,"success")}function F(H){D(H,"failure")}function G(H){return!1}return{call:C,success:E,failure:F,shouldLogSproc:G}}();function w(x,y,z,A,B,C,D,E){D===void 0&&(D={});E===void 0&&(E=void 0);var F=t(C,x,y,D),G=[];return{Map:c("LSDict"),constructor:{n:q},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},db:F,i64:n,islc:d("LSIterationHelpers").slice,ct:d("LSIterationHelpers").count,blob:o,blobs:p,fe:d("LSIterationHelpers").forEach,ftr:d("LSIterationHelpers").filter,gb:d("LSIterationHelpers").groupBy,logger:function(H){if(E)return{mustfix:E,warn:E,info:E,debug:E};var I=c("FBLogger")("messenger_web_product");if(H.startsWith("epoch mismatch")||H.startsWith("cursor mismatch")){var J=function(K){d("LSLogHistory.re").log(K,"error");var L=K!=null?K.replace(/[\s,]+/g,"_"):"epoch_or_cursor_mismatch";d("ODS").bumpEntityKey(3185,"lsplatform",L)};return{mustfix:J,warn:J,info:function(K){return d("LSLogHistory.re").log(K,"log")},debug:function(K){return d("LSLogHistory.re").log(K,"debug")}}}else return I},like:function(H,I){var J=I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(J).test(H)},loopAsync:function(H,I){function J(K){var L;return n.lt(K,H)?I(K).then(function(){return J(n.add(K,q(k())))}):((L=window.Promise)!=null?L:Promise).resolve()}return J(q(j()))},loopSync:function(H,I){for(var J=q(i());n.lt(J,H);J=n.add(J,q(h())))I(J)},merge:function(){function H(N,O){return d("LSDbKeyComparer").compareValue(N,O)>0?N:O}function I(N,O){return d("LSDbKeyComparer").compareValue([N[0],-N[1]],[O[0],-O[1]])<0?N:O}for(var J=arguments.length,K=new Array(J),L=0;L<J;L++)K[L]=arguments[L];var M=K.reduce(function(N,O){var P=r(O,"asc");return{start:N.start&&P.start?H(P.start,N.start):P.start||N.start,end:N.end&&P.end?I(P.end,N.end):P.end||N.end}},{});return babelHelpers.extends({},M.start?M.start[1]?{gt:M.start[0]}:{gte:M.start[0]}:null,M.end?M.end[1]?{lt:M.end[0]}:{lte:M.end[0]}:null)},n:q,nop:async function(H){var I;if(typeof H==="string"){I=z[H+".bs"];if(I==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+H,"messenger_web_product");I.load&&(I=await I.load());I=I.call}else I=H.call;try{for(var J=arguments.length,K=new Array(J>1?J-1:0),L=1;L<J;L++)K[L-1]=arguments[L];return I.apply(void 0,[C,x].concat(K))}catch(M){c("FBLogger")("messenger_web_product").catching(M).addMetadata(l,"NATIVE_OP_ID",H.toString()).warn("Native operation %s failed",H.toString());throw M}},notnull:function(H){if(H===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return H},ntop:async function(H,I){var J;if(typeof I==="string"){J=z[I.toString()];if(J==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+H+" and id: "+I,"messenger_web_product");J.load&&(J=await J.load());J=J.call}else J=I.call;for(var K=arguments.length,L=new Array(K>2?K-2:0),M=2;M<K;M++)L[M-2]=arguments[M];return J.apply(void 0,[C,x].concat(L))},print:function(H){},resolve:function(H){var I;return((I=window.Promise)!=null?I:Promise).resolve(H)},rm:n.of_int32(x),seq:function(H){return H.slice(1).reduce(function(I,J){return I.then(J)},H[0]())},slc:function(H,I){return Array.prototype.slice.call(H,I)},sp:async function(H){var I;if(typeof H==="string"){I=z[H];if(I==null)throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+H,"messenger_web_product");I.load&&(I=await I.load())}else I=H;var J=this;switch(x){case 0:J=w(2,y,z,A,B,C,D,E);break;case 2:J=w(1,y,z,A,B,C,D,E);break}var K=u(I),L=v.shouldLogSproc(K),M={sprocName:K,shouldLog:L};G.push(H);try{v.call(M);for(var N=arguments.length,O=new Array(N>1?N-1:0),P=1;P<N;P++)O[P-1]=arguments[P];var Q=await I.apply(void 0,O.concat([J]));v.success(M);return Q}catch(R){c("FBLogger")("messenger_web_product").catching(R).addMetadata(l,"SPROC_STACK",G.join("\n")).warn("Sproc %s failed",H);v.failure(M);throw R}finally{G.pop()}},throw:function(H){throw c("unrecoverableViolation")(H,"messenger_comet")},ta:d("LSIterationHelpers").toArray,toJSON:function(H){return d("LSJson").stringify(H)},sb:d("LSIterationHelpers").sortBy,localize:function(H,I){var J=c("bs_caml_int64").to_string(H),K=function(L){return!I?"":I[L]||""};return A(J,K).toString()},localizeV2:function(H,I){var J=c("bs_caml_int64").to_string(H),K=function(L){return!I?"":I[L]||""};return B(J,K).toString()}}}w.n=q;g.default=w}),98);
__d("LSDynamicDependencies",["Bootloader","Promise","RelayFBModuleLoader","SiteData","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a){var c=[];for(var e=0;e<a.length;e++){var g=a[e],i=g.name;i!=null&&!(i in h)&&c.push(g)}var j=b("Promise").all(c.map(function(c){var e,a;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=c.name;if(!(e==null)){f.next=3;break}return f.abrupt("return");case 3:h[e]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(j);case 2:return a.abrupt("return",h[e]);case 3:case"end":return a.stop()}},null,this)}};f.next=6;return b("regeneratorRuntime").awrap(d("RelayFBModuleLoader").load(c.value));case 6:a=f.sent,h[e]=a;case 8:case"end":return f.stop()}},null,this)})).then(function(a){});return j}function i(a,b,c){a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,d,e){var f=new Map();for(var a=(a=a)!=null?a:[],g=Array.isArray(a),k=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(g){if(k>=a.length)break;l=a[k++]}else{k=a.next();if(k.done)break;l=k.value}l=l;l in h||f.set(l,"LS"+j(l))}for(var k=(l=d)!=null?l:[],g=Array.isArray(k),a=0,k=g?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(a>=k.length)break;d=k[a++]}else{a=k.next();if(a.done)break;d=a.value}l=d;d=l+".bs";d in h||f.set(d,"LS"+j(l)+".bs")}for(var l=(d=e)!=null?d:[],a=Array.isArray(l),g=0,l=a?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(a){if(g>=l.length)break;k=l[g++]}else{g=l.next();if(g.done)break;k=g.value}e=k;e in h||f.set(e,"LS"+j(e))}if(f.size===0)return b("Promise").resolve();var m=new(b("Promise"))(function(a){var d={},e=[],g=function(){if(k){if(l>=j.length)return"break";n=j[l++]}else{l=j.next();if(l.done)return"break";n=l.value}var a=n,c=a[0];a=a[1];d[a]={be:1,r:[]};e.push(a);h[c]={load:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(m);case 2:return a.abrupt("return",h[c]);case 3:case"end":return a.stop()}},null,this)}}};for(var j=f,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n,o=g();if(o==="break")break}c("Bootloader").handlePayload({compMap:d,consistency:{rev:c("SiteData").client_revision}});i(c("Bootloader"),e,function(b){Array.from(f.entries()).forEach(function(a,c){var d=a[0];a[1];h[d]=b[c]}),a()})});return m}g.cachedModules=h;g.downloadRelayDependencies=a;g.downloadBootloaderDependencies=e}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],messages:[{indexName:"fk_messages",tableName:"attachments"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("LSMetadata",["LSDbForeignKeys","LSTableSchemas","ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},e={},f=-1;for(var g=0;g<a.length;g++){var h=a[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=c("LSDbForeignKeys")[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=l.indexes)!=null?k:{},name:l.name,primaryKeyIds:l.primary_key};b[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};b[k.id]=k;e[k.name]=k;return{tableIds:b,tableNames:e}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}b=a(c("LSTableSchemas"));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("LS.bs",["LS","LSDynamicDependencies","LSLocalizedStrings","LSLocalizedStringsV2","LSMetadata"],(function(a,b,c,d,e,f){"use strict";var g=b("LSLocalizedStringsV2"),h=b("LSLocalizedStrings"),i=b("LSDynamicDependencies").cachedModules,j=b("LSMetadata").metadata;function a(a){return b("LS")(1,j,i,h,g,a,0)}c=b("LSDynamicDependencies").cachedModules;f.make=a;f.cachedModules=c}),null);
__d("LSJSInMemoryStorage.bs",["ReStore","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReStore")(b("createReStoreEphemeralPersistence")(),a)}f.make=a}),null);
__d("LSTransaction.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a.runInTransaction(b,function(){switch(c){case"readOnly":return"readonly";case"readWrite":return"readwrite"}}())}f.run=a}),null);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114],ib=[0,115],jb=[0,116],kb=[0,117],lb=[0,118],mb=[0,119],nb=[0,120],ob=[0,121];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.atcDaemon=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb;f.staticEntryPoint=ib;f.giphyCategory=jb;f.communityMessagingPresence=kb;f.reactionsV2=lb;f.threadSubscription=mb;f.communityMessagingSearch=nb;f.communityMessagingDiscovery=ob}),null);
__d("LSMailboxInitialSyncCursor",["CurrentLocale","I64","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";a={full_height:200,locale:c("CurrentLocale").get(),preview_height:200,preview_height_large:400,preview_width:c("gkx")("1224637")?183:150,preview_width_large:c("gkx")("1224637")?360:300,scale:1,snapshot_num_threads_per_page:15};b=d("I64").of_int32(c("qex")._("461")===!0?3:1);e=d("I64").of_int32(0);f=a;g.syncChannel=b;g.lastSyncTimestampMs=e;g.syncParams=f}),98);
__d("LSSyncChannel.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,3];f.mqtt=a;f.http=c;f.dgw=d}),null);
__d("LSSyncGroupsUtils.bs",["CurrentLocale","LSDict","LSJson","LSSyncChannel.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b.reduce(function(b,c){return b.then(function(b){return a.put(c)})},window.Promise.resolve(void 0))}c=b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]]));e={groupId:(d=b("bs_caml_int64")).zero,currentCursor:void 0,syncStatus:d.zero,syncParams:c,sendSyncParams:!0,minTimeToSyncTimestampMs:d.neg_one,canIgnoreTimestamp:!1,priority:d.zero,lastSyncRequestTimestampMs:d.zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt};c={taskQueueName:"",syncDatabaseId:d.zero,epochId:void 0,networkTaskIdentifier:void 0,lastSentTimestampMs:d.zero,failureCount:d.zero,lastSyncRequestTimestampMs:d.zero,lastDelayedRequestTimestampMs:void 0};f.writeRows=a;f.defaultNetworkRequest=c;f.defaultSyncGroup=e}),null);
__d("MNetRankType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,26],B=[0,27],C=[0,28],D=[0,29],E=[0,30],F=[0,31],G=[0,32],H=[0,33],I=[0,34],J=[0,35],K=[0,36],L=[0,37],M=[0,38],N=[0,39],O=[0,40],P=[0,41],Q=[0,42],R=[0,43],S=[0,44],T=[0,45];f.inboxActiveNow=a;f.messengerUserSearch=c;f.montageUser=d;f.broadcastFlowTopContacts=e;f.broadcastFlowNeedyContacts=b;f.messengerGroupSearch=g;f.rtcTopContacts=h;f.pstnTopContacts=i;f.messengerNonContactSearch=j;f.messengerSearchBootstrap=k;f.activeBeeper=l;f.montageAndActiveNow=m;f.messengerPageSearch=n;f.messengerGameSearch=o;f.wwwNullstate=p;f.rtcGrowth=q;f.messengerOmnipickerNullstate=r;f.rtcSequentialTopContacts=s;f.messengerUserSearchNullstate=t;f.mliteDiodePromotion=u;f.messengerPendingRequest=v;f.messengerCloseConnection=w;f.messengerMontageSeenSheet=x;f.messengerOmnipickerKeypress=y;f.messengerNotifQpTargetingUpsellType=z;f.contactTabActiveNow=A;f.messengerUnivNullstateBlend=B;f.messengerInboxThreads=C;f.inboxActiveNowNoBoosting=D;f.broadcastFlowTopContactsFbShare=E;f.broadcastFlowTopContactsMessengerShare=F;f.broadcastFlowTopContactsExternalShare=G;f.messengerTrendingStickers=H;f.messengerBroadcastFlowTopThreads=I;f.messengerSends28d=J;f.messengerRoomInvite=K;f.messengerRoomInviteSearch=L;f.inboxActiveNowPrefetch=M;f.messengerBlendedKeypress=N;f.messengerBlendedNullstate=O;f.messengerCarrierMessaging=P;f.messengerRoomInviteGroup=Q;f.messengerInboxBirthdayItem=R;f.instagramDirectSearchNullstate=S;f.broadcastFlowTopContactsAndTopThreadFbShare=T}),null);
__d("LSDefaultSyncGroups.bs",["CurrentUser","LSDatabaseType.bs","LSMailboxInitialSyncCursor","LSSyncGroupsUtils.bs","MNetRankType.bs","bs_caml_format","bs_caml_int64","bs_curry","cr:11269","cr:2694"],(function(a,b,c,d,e,f){"use strict";var g={mnet_rank_types:[(c=b("MNetRankType.bs")).messengerUserSearch,c.messengerUserSearchNullstate,c.inboxActiveNow,c.messengerOmnipickerNullstate].map(b("bs_caml_int64").to_int32)};function h(a){return[function(c){var d;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("network_requests"),[{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:(d=b("LSDatabaseType.bs")).mailbox,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.contact,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.payments,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.threadTheme,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.sticker,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.settings,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.inthreadbanner,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs}])},function(c){var d,e;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("sync_groups"),[{groupId:(d=b("LSDatabaseType.bs")).mailbox,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify((e=b("LSMailboxInitialSyncCursor")).syncParams),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:e.lastSyncTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel},{groupId:d.contact,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:e.lastSyncTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel},{groupId:d.payments,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.threadTheme,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:b("bs_caml_int64").neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.sticker,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.ranking,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify(g),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.settings,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.inthreadbanner,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:b("bs_caml_int64").neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.stories,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:b("bs_caml_int64").neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel}])},function(c){return b("LSSyncGroupsUtils.bs").writeRows(a.table("_user_info"),[{id:b("bs_caml_int64").one,facebookUserId:b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID())}])},function(c){if(b("cr:11269")==null)return window.Promise.resolve(void 0);else return b("bs_curry")._1(b("cr:11269").seed,a)},function(c){if(b("cr:2694")==null)return window.Promise.resolve(void 0);else return b("bs_curry")._1(b("cr:2694").seed,a)}]}function a(a){return h(a).reduce(function(a,c){return a.then(b("bs_curry").__1(c))},window.Promise.resolve(void 0))}f.syncRankingParams=g;f.$LSE2EEMetadataSyncSyncGroups$requireCond=b("cr:11269");f.$LSPresenceSyncGroups$requireCond=b("cr:2694");f.writeData=h;f.seedDb=a}),null);
__d("MWLSSchemaEphemeral.bs",["LSDefaultSyncGroups.bs","LSJSInMemoryStorage.bs","LSMetadata","LSTransaction.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(b("LSJSInMemoryStorage.bs").make(b("LSMetadata").metadata)).then(function(a){return b("LSTransaction.bs").run(a,b("LSDefaultSyncGroups.bs").seedDb,"readWrite").then(function(b){return a})})}f.createDB=a}),null);